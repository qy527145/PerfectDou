# PerfectDou é¡¹ç›®æ¦‚è§ˆ

## ðŸŽ¯ é¡¹ç›®ç®€ä»‹

PerfectDou æ˜¯åŸºäºŽ NeurIPS 2022 è®ºæ–‡çš„å…ˆè¿›æ–—åœ°ä¸» AI ç³»ç»Ÿï¼Œé‡‡ç”¨å®Œç¾Žä¿¡æ¯è’¸é¦æŠ€æœ¯ï¼Œåœ¨æ–—åœ°ä¸»æ¸¸æˆä¸­è¾¾åˆ°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚

## ðŸ“ é¡¹ç›®ç»“æž„

### æ ¸å¿ƒåŒ…ç»“æž„
```
src/perfectdou/
â”œâ”€â”€ battle_assistant/    # ðŸŽ® å®žæˆ˜åŠ©æ‰‹æ¨¡å—
â”œâ”€â”€ cli/                # ðŸ–¥ï¸ å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ env/                # ðŸŽ² æ¸¸æˆçŽ¯å¢ƒ
â”œâ”€â”€ evaluation/         # ðŸ“Š è¯„ä¼°æ¨¡å—
â””â”€â”€ model/             # ðŸ¤– AIæ¨¡åž‹
```

### ä¸»è¦åŠŸèƒ½æ¨¡å—

#### 1. å®žæˆ˜åŠ©æ‰‹ (`battle_assistant/`)
- **AIé¡¾é—®** (`ai_advisor.py`): æä¾›æ™ºèƒ½å‡ºç‰Œå»ºè®®
- **å¯¹æˆ˜ç•Œé¢** (`battle_interface.py`): ç”¨æˆ·äº¤äº’ç•Œé¢
- **ç‰Œåž‹è§£æž** (`card_parser.py`): å¤šæ ¼å¼ç‰Œåž‹è¾“å…¥è§£æž
- **çŠ¶æ€ç®¡ç†** (`game_state.py`): æ¸¸æˆçŠ¶æ€è·Ÿè¸ª

#### 2. å‘½ä»¤è¡Œå·¥å…· (`cli/`)
- **å®žæˆ˜åŠ©æ‰‹** (`battle_assistant.py`): ä¸»è¦çš„å¯¹æˆ˜ç¨‹åº
- **æ¼”ç¤ºç¨‹åº** (`demo_battle_assistant.py`): åŠŸèƒ½æ¼”ç¤º
- **è¯„ä¼°å·¥å…·** (`evaluate.py`): æ¨¡åž‹æ€§èƒ½è¯„ä¼°
- **æ•°æ®ç”Ÿæˆ** (`generate_eval_data.py`): è¯„ä¼°æ•°æ®ç”Ÿæˆ

#### 3. æ¸¸æˆçŽ¯å¢ƒ (`env/`)
- æ–—åœ°ä¸»æ¸¸æˆé€»è¾‘å®žçŽ°
- åŠ¨ä½œç”Ÿæˆå’Œæ£€æµ‹
- æ¸¸æˆçŠ¶æ€ç¼–ç 

#### 4. è¯„ä¼°æ¨¡å— (`evaluation/`)
- å¤šç§AIæ™ºèƒ½ä½“å®žçŽ°
- ä»¿çœŸå¯¹æˆ˜è¯„ä¼°
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—

## ðŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
poetry install
```

### ä¸»è¦å‘½ä»¤

#### å®žæˆ˜åŠ©æ‰‹
```bash
# å¯åŠ¨å®žæˆ˜åŠ©æ‰‹
poetry run battle

# è¿è¡Œæ¼”ç¤º
poetry run demo
```

#### æ¨¡åž‹è¯„ä¼°
```bash
# ç”Ÿæˆè¯„ä¼°æ•°æ®
poetry run generate-eval

# è¿è¡Œè¯„ä¼°
poetry run evaluate --landlord perfectdou --landlord_up douzero --landlord_down douzero
```

#### æµ‹è¯•
```bash
# è¿è¡ŒåŠŸèƒ½æµ‹è¯•
poetry run python tests/test_battle_assistant.py
```

## ðŸŽ® å®žæˆ˜åŠ©æ‰‹ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ðŸ¤– AIæ™ºèƒ½å†³ç­–**: åŸºäºŽPerfectDouæ¨¡åž‹çš„æœ€ä¼˜ç­–ç•¥
- **ðŸ“Š å®žæ—¶çŠ¶æ€è·Ÿè¸ª**: å®Œæ•´çš„æ¸¸æˆçŠ¶æ€ç®¡ç†
- **ðŸŽ¯ å¤šæ ¼å¼è¾“å…¥**: æ”¯æŒä¸­è‹±æ–‡ã€ç®€åŒ–ç­‰å¤šç§è¾“å…¥æ–¹å¼
- **ðŸ’¡ ç­–ç•¥åˆ†æž**: æä¾›å‡ºç‰Œç†ç”±å’Œç½®ä¿¡åº¦è¯„ä¼°

### æ”¯æŒçš„è¾“å…¥æ ¼å¼
| æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜Ž |
|------|------|------|
| æ ‡å‡†æ ¼å¼ | `3 4 5 J Q K A 2 å°çŽ‹ å¤§çŽ‹` | ç©ºæ ¼åˆ†éš” |
| ç®€åŒ–æ ¼å¼ | `345JQKA2å°å¤§` | ç´§å‡‘è¾“å…¥ |
| ä¸­æ–‡æ ¼å¼ | `ä¸‰å››äº” J Q K A äºŒ å°çŽ‹ å¤§çŽ‹` | ä¸­æ–‡æ•°å­— |

## ðŸ“Š æ¨¡åž‹æ€§èƒ½

PerfectDou åœ¨ä¸ŽçŽ°æœ‰AIç³»ç»Ÿçš„å¯¹æ¯”ä¸­è¡¨çŽ°ä¼˜å¼‚ï¼š
- å‡»è´¥æ‰€æœ‰çŽ°æœ‰çš„æ–—åœ°ä¸»AIç¨‹åº
- åœ¨å¤§è§„æ¨¡è¯„ä¼°ä¸­è¾¾åˆ°æœ€å…ˆè¿›æ€§èƒ½
- åŸºäºŽå®Œç¾Žä¿¡æ¯è’¸é¦çš„åˆ›æ–°è®­ç»ƒæ–¹æ³•

## ðŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®é…ç½®
- **åŒ…ç®¡ç†**: Poetry
- **Pythonç‰ˆæœ¬**: >=3.7,<3.8
- **ä¸»è¦ä¾èµ–**: torch, onnxruntime, rlcard

### ä»£ç è§„èŒƒ
- éµå¾ª PEP 8 æ ‡å‡†
- ä½¿ç”¨ Black è¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä½¿ç”¨ mypy è¿›è¡Œç±»åž‹æ£€æŸ¥

### æµ‹è¯•è¦†ç›–
- ç‰Œåž‹è§£æžåŠŸèƒ½æµ‹è¯•
- æ¸¸æˆçŠ¶æ€ç®¡ç†æµ‹è¯•
- AIé¡¾é—®åŠŸèƒ½æµ‹è¯•

## ðŸ“š æ–‡æ¡£èµ„æº

- **[å®žæˆ˜åŠ©æ‰‹ä½¿ç”¨æŒ‡å—](battle_assistant_guide.md)**: è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜Ž
- **[å¼€å‘æŒ‡å—](development_guide.md)**: å¼€å‘çŽ¯å¢ƒè®¾ç½®å’Œè´¡çŒ®æŒ‡å—
- **[é¡¹ç›®README](../README.md)**: é¡¹ç›®åŸºæœ¬ä¿¡æ¯å’Œå®‰è£…è¯´æ˜Ž

## ðŸ”— ç›¸å…³é“¾æŽ¥

- **è®ºæ–‡**: [PerfectDou: Dominating DouDizhu with Perfect Information Distillation](https://arxiv.org/abs/2203.16406)
- **åœ¨çº¿æ¼”ç¤º**: [https://outer-perfectdou-demo-gzailab.nie.netease.com](https://outer-perfectdou-demo-gzailab.nie.netease.com)
- **GitHub**: [é¡¹ç›®ä»“åº“](https://github.com/Netease-Games-AI-Lab-Guangzhou/PerfectDou)

## ðŸ“ž è”ç³»æˆ‘ä»¬

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿Žè”ç³»ï¼š
- yangguan@corp.netease.com
- minghuanliu@sjtu.edu.cn
- hongweijun@corp.netease.com
- gzzengguangjun@corp.netease.com

---

**è®©AIåŠ©æ‚¨æˆä¸ºæ–—åœ°ä¸»é«˜æ‰‹ï¼** ðŸŽ‰
